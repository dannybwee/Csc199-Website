<!DOCTYPE html>
<html>
<head>

</head>
<body>


<h1>Bayesian Network Simulation</h1>

<body onload="init()">
<div id="sample" style ="position: relative;">
  
  <div id="myDiagramDiv" style="border: solid 1px black; width:100%; height:600px"></div>
  <style type="text/css">
  #myOverviewDiv {
    position: absolute;
    width:200px;
    height:100px;
    top: 10px;
    left: 10px;
    background-color: aliceblue;
    z-index: 300; /* make sure its in front */
    border: solid 1px blue;
  }
</style>
  <div id="myOverviewDiv"></div> <!-- Styled in a <style> tag at the top of the html page -->
  
</div>
</body>
  <script src="./javascript/node_modules/gojs/release/go-debug.js"></script>
  <script id = "code">
//store data into an array
//call array when needed    
function init() {
    if (window.goSamples) goSamples();  // init for these samples -- you don't need to call this
    var $ = go.GraphObject.make;  // for conciseness in defining templates
    myDiagram = $(go.Diagram, "myDiagramDiv",  // create a Diagram for the DIV HTML element
                  {
                    initialContentAlignment: go.Spot.Center,  // center the content
                    "linkingTool.isEnabled": false,  // invoked explicitly by drawLink function, below
                    "linkingTool.direction": go.LinkingTool.ForwardsOnly,  // only draw "from" towards "to"
                    "undoManager.isEnabled": true  // enable undo & redo
                  });
    myDiagram.linkTemplate =
      $(go.Link,
        { routing: go.Link.AvoidsNodes, corner: 5 },
        $(go.Shape, { strokeWidth: 1.5 }),
        $(go.Shape, { toArrow: "OpenTriangle" })
      );
	  
	myDiagram.addDiagramListener("Modified", function(e) {
      var button = document.getElementById("SaveButton");
      if (button) button.disabled = !myDiagram.isModified;
      var idx = document.title.indexOf("*");
      if (myDiagram.isModified) {
        if (idx < 0) document.title += "*";
      } else {
        if (idx >= 0) document.title = document.title.substr(0, idx);
      }
    });
	
	myDiagram.groupTemplate =
    $(go.Group, "Auto",

      $(go.Shape, "Rectangle", { fill: "gray", stroke: "gray" }),
      $(go.Panel, "Table",
        { margin: 0.5 },  // avoid overlapping border with table contents
        $(go.RowColumnDefinition, { row: 0, background: "white" }),  // header is white
        $("SubGraphExpanderButton", { row: 0, column: 0, margin: 3 }),
        $(go.TextBlock,  // title is centered in header
          { row: 0, column: 1, font: "bold 14px Sans-Serif", stroke: "gray",
            textAlign: "center", stretch: go.GraphObject.Horizontal },
          new go.Binding("text")),
        $(go.Placeholder,  // becomes zero-sized when Group.isSubGraphExpanded is false
          { row: 1, columnSpan: 2, padding: 10, alignment: go.Spot.TopLeft },
          new go.Binding("padding", "isSubGraphExpanded",
                         function(exp) { return exp ? 10 : 0; } ).ofObject())
      )
    );
	
	
	
    myDiagram.nodeTemplate =
      $(go.Node, "Auto",
        {
          // rearrange the link points evenly along the sides of the nodes as links are
          // drawn or reconnected -- these event handlers only make sense when the fromSpot
          // and toSpot are Spot.xxxSides
          linkConnected: function(node, link, port) {
            if (link.fromNode !== null) link.fromNode.invalidateConnectedLinks();
            if (link.toNode !== null) link.toNode.invalidateConnectedLinks();
          },
          linkDisconnected: function(node, link, port) {
            if (link.fromNode !== null) link.fromNode.invalidateConnectedLinks();
            if (link.toNode !== null) link.toNode.invalidateConnectedLinks();
          },
          locationSpot: go.Spot.Center
        },
        new go.Binding("location", "location", go.Point.parse).makeTwoWay(go.Point.stringify),
        $(go.Shape,"RoundedRectangle",
          {
            name: "SHAPE",  // named so that changeColor can modify it
            strokeWidth: 1,  // no border
            portId: "",
            // use the following property if you want users to draw new links
            // interactively by dragging from the Shape, and re-enable the LinkingTool
            // in the initialization of the Diagram
            //cursor: "pointer",
            fromSpot: go.Spot.AllSides, fromLinkable: true,
            fromLinkableDuplicates: true, fromLinkableSelfNode: true,
            toSpot: go.Spot.AllSides, toLinkable: true,
            toLinkableDuplicates: true, toLinkableSelfNode: true
          },
          new go.Binding("fill", "color")),
		 
		  $(go.Panel, "Table",
		  { padding: 0.5 },
		  $(go.RowColumnDefinition, { column: 1, separatorStroke: "black", coversSeparators: true }),
		  $(go.RowColumnDefinition, { row: 0, separatorStroke: "black",background: "lightblue", coversSeparators: true }),
          $(go.RowColumnDefinition, { row: 1, separatorStroke: "black", coversSeparators: true }),
          $(go.RowColumnDefinition, { row: 2, separatorStroke: "black",coversSeparators: true }),
		  $(go.TextBlock,
            {
			 margin: 5, row: 0, column: 0,columnSpan: 3, textAlign: 'center',
            },
			new go.Binding("text", "name")),
			
		  $(go.TextBlock,
            { row: 1,
			  column: 1,
              wrap: go.TextBlock.None, margin: 5,
              isMultiline: false, textAlign: 'left',
              font: '10pt  Segoe UI,sans-serif', stroke: 'Black' },
            new go.Binding("text", "Truth").makeTwoWay()),
          $(go.TextBlock, "",
            { row: 2,
			  column: 1,
              wrap: go.TextBlock.None, margin: 5,
              isMultiline: false, textAlign: 'left',
              font: '10pt  Segoe UI,sans-serif', stroke: 'Black' },
            new go.Binding("text", "False").makeTwoWay()),
			$(go.TextBlock, "",
            { row: 1,
			  column: 2,
              wrap: go.TextBlock.None, margin: 5,
              isMultiline: false, textAlign: 'left',
              font: '10pt  Segoe UI,sans-serif', stroke: 'Black' },
            new go.Binding("text", "clickCount")),
			$(go.TextBlock, "",
            { row: 2,
			  column: 2,
              wrap: go.TextBlock.None, margin: 5,
              isMultiline: false, textAlign: 'left',
              font: '10pt  Segoe UI,sans-serif', stroke: 'Black' },
            new go.Binding("text", "FalseP").makeTwoWay()),
	      $("Button",  // button A
                {
                  name: "ButtonA",
				  column: 0, row: 1,
				  click: incrementCounter
                },
                new go.Binding("portId", "a"),
                $(go.TextBlock,
                  { font: '500 16px Roboto, sans-serif' },
                  new go.Binding("text", "aText"))
              ),  // end button A
		  $("Button",  // button B
                {
                  name: "ButtonB",
				  column: 0, row: 2
                },
                new go.Binding("portId", "b"),
                $(go.TextBlock,
                  { font: '500 16px Roboto, sans-serif' },
                  new go.Binding("text", "bText"))
              ),  // end button B
        )//end of table:
		  
    );
    var rNums = [1,3];
	
   function incrementCounter(e, obj) {
	var node = obj.part;
    var data = node.data;
	 
   if (data) {
      node.diagram.startTransaction("clicked");
      var old = data.clickCount;
      data.clickCount++;
      node.diagram.model.raiseDataChanged(data, "clickCount", old, data.clickCount);
      node.diagram.commitTransaction("clicked");
    }
  }

   
	  
    myDiagram.model = new go.GraphLinksModel(
    [
      { key: 1, name: "x1.1", 
				Truth: "Tainted:", 
				False: "NotTainted:",
				clickCount: .0001,
				FalseP: .9999,
	  color: "lightblue", location: "-100 -140", group: "Omega"},
	  
      { key: 2, name: "x2.1", 
				Truth: "Tainted:", 
				False: "NotTainted:",
				clickCount: .02,
				FalseP: 99.98,
	  color: "lightblue", location: "0 0", group: "Omega"},
	  
      { key: 3, name: "x3.1", 
				Truth: "Tainted:", 
				False: "NotTainted:",
				clickCount: .03,
				FalseP: 99.97,
	  color: "lightblue", location: "200 0", group: "Omega" },
	  
	  { key: 4, name: "x4.1", 
				Truth: "Tainted:", 
				False: "NotTainted:",
				clickCount: .99,
				FalseP: 99.01,
	  color: "lightblue", location: "400 -100", group: "Omega2"},

	  { key: 5, name: "x5.1", 
				Truth: "Tainted:", 
				False: "NotTainted:",
				clickCount: .90,
				FalseP: 99.1,
	  color: "lightblue", location: "580 -60",group: "Omega2"},
	  
	  { key: 6, name: "x4.2", 
				Truth: "Tainted:", 
				False: "NotTainted:",
				clickCount: .99,
				FalseP: 99.01,
	  color: "lightblue", location: "400 40",group: "Omega2"},
	  
	  { key: 7, name: "x7.1", 
				Truth: "Tainted:", 
				False: "NotTainted:",
				clickCount: .99,
				FalseP: 99.01,
	  color: "lightblue", location: "750 -60",group: "Omega2"},
	  
	 { key: 8, name: "x8.1", 
				Truth: "Tainted:", 
				False: "NotTainted:",
				clickCount: .99,
				FalseP: 99.01,
	  color: "lightblue", location: "580 -350",group: "Omega3"},
	 
	 { key: 9, name: "x9.1", 
				Truth: "Tainted:", 
				False: "NotTainted:",
				clickCount: .99,
				FalseP: 99.01,
	  color: "lightblue", location: "400 -360",group: "Omega3"},
	  
	  
	 { key: 10, name: "x10.1", 
				Truth: "Tainted:", 
				False: "NotTainted:",
				clickCount: .99,
				FalseP: 99.01,
	  color: "lightblue", location: "450 180",group: "Omega2"},
	  
	  { key: "Omega",text:"Group1", isGroup: true},
	  { key: "Omega2",text:"Group2", isGroup: true},
	  { key: "Omega3",text:"Group3", isGroup: true},
	  
	  
    ],
    [
	  { from: 1, to: 2 },
	  { from: 2, to: 3 },
	  { from: 4, to: 5 },
	  { from: 4, to: 6 },
	  { from: 5, to: 7},
	  { from: 4, to: 8},
	  { from: 8, to: 9},
	  { from: 4, to: 10},
	  { from: 10, to: 6},
    ]);
	
	myOverview =
      $(go.Overview, "myOverviewDiv",  // the HTML DIV element for the Overview
        { observed: myDiagram, contentAlignment: go.Spot.Center });   // tell it which Diagram to show and pan
  }
  

  
  /*
      myDiagram.model = new go.GraphLinksModel(
    [
      { key: 1, name: "x1.1", 
				Truth: "Tainted:", 
				False: "NotTainted:",
				clickCount: .0001,
				FalseP: .9999,
	  color: "lightblue", location: "-140 -140" },
	  
      { key: 2, name: "MP", 
				Truth: "True: ",
				False: "False: ",
				FalseP: "99",
				clickCount: 300,
	  color: "lightblue", location: "140 0" },
	  
      { key: 3, name: "DO", 
				Truth: "True: ", 
				False: "False: ", 
				TrueP: "38.58",
				FalseP: "60.42",
	  color: "lightblue", location: "70 140" },
	  
      { key: 4, name: "LO", 
				Truth: "True: ",
				False: "False: ",
				TrueP: "13.25",
				FalseP: "86.75",
				color: "lightblue", location: "-70 140" },
	  { key: 5, name: "Replace_node", 
				Truth: "True: ",
				False: "False: ",
				TrueP: "40.43",
				FalseP: "59.57",
				color: "lightblue", location: "70 280" }
    ],
    [
	  { from: 1, to: 4 },
	  { from: 1, to: 3 },
	  { from: 3, to: 5 },
	  { from: 2, to: 3 },
    ]);
  }
  
  
  */
  </script>
</html>
